@import './variables.css';

/* ---------- root tokens ---------- */
:root{
  --nav-h:56px;
  --nav-bg:rgba(12,16,22,.88);
  --nav-border:rgba(255,255,255,.10);
  --icon-muted:#d7dbe1;
  --safe: env(safe-area-inset-bottom, 0px);
}

/* ---------- screen & reel ---------- */
.reels-screen{
  height:100dvh;          /* dynamic vh for mobile URL bar */
  min-height:100svh;      /* safari fallback */
  width:100vw;
  overflow-y:scroll;
  scroll-snap-type:y mandatory;
  background:#000;
  padding-bottom:calc(var(--nav-h) + var(--safe));
}

.reel{
  position:relative;
  height:100dvh;
  width:100vw;
  scroll-snap-align:start;
  display:flex;
  align-items:center;
  justify-content:center;
  background:#000;
}

.reel video{
  width:100vw;
  height:100dvh;
  object-fit:cover;
}

/* ---------- overlay ---------- */
.reel-overlay{
  position:absolute;
  inset:0;
  pointer-events:none;
}
.reel-overlay-gradient{
  position:absolute;
  inset:0;
  background:linear-gradient(transparent 60%, rgba(0,0,0,.78) 100%);
}

/* ---------- description + CTA (PINNED) ---------- */
.reel-content{
  position:absolute;
  left:16px;
  right:16px;
  bottom:calc(var(--nav-h) + var(--safe) + 16px); /* key: always above nav */
  pointer-events:auto;
}

.reel-description{
  color:#fff;
  font-size:15px;
  line-height:1.35;
  margin:0 0 10px 0;
  max-height:3em;
  overflow:hidden;
  display:-webkit-box;
  -webkit-line-clamp:2;
  -webkit-box-orient:vertical;
}

.reel-btn{
  display:inline-block;
  padding:8px 16px;
  border:none;
  font-size:14px;
  font-weight:600;
  background:#1e73ff;
  color:#fff;
  border-radius:8px;
  box-shadow:0 2px 6px rgba(0,0,0,.25);
  transition:transform .08s ease, filter .15s ease;
}
.reel-btn:active{ transform:translateY(1px); }
.reel-btn:hover{ filter:brightness(1.05); }

/* ---------- right actions ---------- */
.reel-actions{
  position:absolute;
  right:10px;
  bottom:calc(var(--nav-h) + var(--safe) + 26px);
  display:flex;
  flex-direction:column;
  gap:16px;
  align-items:center;
  pointer-events:auto;
  z-index:30;
}
.action{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:6px;
  color:var(--icon-muted);
}
.action-btn .icon{
  fill:none;
  stroke:currentColor;
  stroke-width:2;
  transition:.2s ease;
}
.action-btn.liked .icon{ fill:#fff; stroke:#fff; transform:scale(1.15); }
.action-btn.saved{ color:#fff; }
.action-btn{
  width:44px;height:44px;border-radius:50%;
  border:1px solid rgba(255,255,255,.16);
  background:rgba(0,0,0,.45);
  display:grid;place-items:center;cursor:pointer;
  transition:transform .08s ease, background .15s ease, border-color .15s ease, color .15s ease;
  box-shadow:0 4px 16px rgba(0,0,0,.25);
}
.action-btn:hover{ background:rgba(0,0,0,.55); border-color:rgba(255,255,255,.22); }
.action-btn:active{ transform:scale(.95); }
.action-count{ font-size:12px; color:var(--icon-muted); opacity:.95; }

/* ---------- bottom nav ---------- */
.bottom-nav{
  position:fixed;
  bottom:0;left:0;width:100%;
  height:calc(var(--nav-h) + var(--safe));
  z-index:40;
  backdrop-filter:blur(8px);
  background:var(--nav-bg);
  border-top:1px solid var(--nav-border);
  display:grid;grid-template-columns:1fr 1fr;
}
.nav-item{
  display:grid;place-items:center;gap:6px;
  padding:10px 0;color:var(--icon-muted);
  text-decoration:none;font-size:12px;
  transition:color .15s ease;
}
.nav-item.active{ color:#fff; }
.icon{ width:22px;height:22px;display:block;fill:currentColor; }

/* ---------- tiny-height phones (keep CTA clear) ---------- */
@media (max-height: 740px){
  .reel-content{ bottom:calc(var(--nav-h) + var(--safe) + 30px); }
  .reel-actions{ bottom:calc(var(--nav-h) + var(--safe) + 40px); }
}
@media (max-height: 640px){
  .reel-content{ bottom:calc(var(--nav-h) + var(--safe) + 44px); }
  .reel-actions{ bottom:calc(var(--nav-h) + var(--safe) + 54px); }
}
